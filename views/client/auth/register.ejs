<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="/css/authentication.css" />
    <%- include("../../includes/bootstrap.ejs") %>
    <script type="text/javascript">
      function showLoadingSpinner() {
        document.querySelector('.spinner-wrapper').style.display = 'block';
      }
    </script>
  </head>
  <body>
    <div class="back-arrow-wrapper">
      <a href="/homepage">
        <img src="https://img.icons8.com/cotton/64/000000/circled-left--v2.png"/
        width="45" height="45" />
      </a>
    </div>
    <div class="logo-wrapper">
      <a class="main-nav__logo" href="/homepage"
        ><img src="/assets/icons/navbar/school-logo.png" height="75" width="75"
      /></a>
    </div>
    <form
      class="register-form"
      onsubmit="showLoadingSpinner()"
      method="POST"
      action="/secure/register"
    >
      <input
        required
        type="email"
        class="form-control register-form__email"
        placeholder="Email"
        name="email"
      />
      <p class="register-form__error-message">
        <% if (queryEmail) { %> Must have a Great Neck Public School email
        address. 
        <% } %>
      </p>
      <input
        required
        type="text"
        class="form-control register-form__username"
        placeholder="Full Name"
        name="createUsername"
      />
      <p class="register-form__error-message">
        <% if (queryObj[3]) { %>
          Please enter your first and last name separated by a space.
        <% } else if (queryObj[2]) { %>
          Please enter your real lastname.
        <% } else if (queryObj[1]) { %>
          Please enter your real firstname.
        <% } %>
      </p>
      <input
        required
        type="password"
        class="form-control register-form__password"
        placeholder="Create a Password"
        name="password"
      />
      <input
        required
        type="password"
        class="form-control register-form__confirm-password"
        placeholder="Confirm Password"
        name="confirmPassword"
      />
      <p class="register-form__error-message">
        <% if (!accountCreated) { %> <% if (queryLength) { %> Password must be
        at least 7 characters. <% } else if (querySymbol) { %> Password must not
        include symbols. <% } else if (queryMatch) { %> Passwords must match. <%
        } else if (queryCapital) { %> Password must include an upper case
        character. <% } else if (queryNumber) { %> Password must include a
        number. <% } else if (queryMaxLimit) { %> Password cannot not exceed 30
        characters. <% } %> <% } %>
      </p>
      <% if (emailSent) { %>
      <div class="alert alert-success register-form__email-sent" role="alert">
        <p class="" role="alert">
          Registration approved! Click the link that was sent to you to confirm
          your email address.
        </p>
      </div>
      <% } else { %>
      <button
        type="submit"
        class="btn btn-info register-form__submit"
        id="submit-button"
      >
        Register
      </button>
      <div class="spinner-wrapper" style="text-align: center; display: none">
        <div
          id="loading-spinner"
          class="spinner-border text-primary"
          role="status"
        >
          <span class="sr-only">Loading...</span>
        </div>
      </div>
      <% } %>
      <p class="register-form__form-caption">
        Already have an account? Click
        <a id="register-form__form-caption-link" href="/secure/login">Here</a>
        to login.
      </p>
    </form>
  </body>
  <script type="text/javascript">
  window.__be = window.__be || {};
  window.__be.id = "5fa771082b25cb0007da94f2";
  (function() {
      var be = document.createElement('script'); be.type = 'text/javascript'; be.async = true;
      be.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.chatbot.com/widget/plugin.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(be, s);
  })();
</script>
</html>
